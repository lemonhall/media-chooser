// Generated by CoffeeScript 1.3.3

window.Chute = (function() {

  function Chute() {}

  Chute.setApp = function(app) {
    this.app = app;
  };

  Chute.setIdentifier = function(identifier) {
    this.identifier = identifier;
  };

  Chute.choose = function(params, callback) {
    var browseButton, id, widget;
    if ('function' === typeof params) {
      callback = params;
      params = {};
    }
    params.app = this.app;
    params.identifier = this.identifier;
    if (!(params.mode != null)) {
      params.mode = 'collector';
    }
    if (!(params.popup != null)) {
      params.popup = false;
    }
    params.onSelectionComplete = function(element, data) {
      if (callback) {
        return callback(data);
      }
    };
    id = parseInt(Math.random() * 1000);
    widget = $("<div id=\"chute-" + id + "\"></div>");
    widget.appendTo('body');
    chute("#chute-" + id, params);
    browseButton = widget.find('a.chute-browseButton');
    if (params.popup === false && params.mode === 'collector') {
      browseButton.hide();
    }
    return setTimeout(function() {
      return browseButton.click();
    }, 500);
  };

  return Chute;

})();
